<!DOCTYPE html>
<html>

<head>
	<meta charset="UTF-8">
	<title>DDONG avoid Game</title>
</head>

<script src="./phaser.min.js"></script>

<body>
	똥 피하기 게임
</body>
</html>

<script type="text/javascript">
	let game = new Phaser.Game(800, 500, Phaser.CANVAS, null,
			{
				preload: preload,
				create: create,
				update: update
			}
		)

	let player;
	let box;
	let keyMove;

	function preload(){
		game.load.image("player", "./image/M_01.png", 0.000000000032, 0.00000040);
		game.load.image("box", "./image/fence_remix (2).png");
	}

	function create(){
		game.physics.startSystem(Phaser.Physics.ARCADE);

		game.stage.backgroundColor = "#CE93D8";
		game.create.texture('sky', ['C'], 800, 150, 0);
		game.add.sprite(0, 0, 'sky');

		box = game.add.group();

		for(let i = 0; i < 53; i++){
			box.create(i*15, 130, "box");
			box.create(i*15, 500-40, "box");
		}

		for(let i = 0; i < 15; i++){
			box.create(0, i*20+152, "box");
			box.create(800-25, i*20+152, "box");
		}

		player = game.add.sprite(300, 200, "player");
		player.scale.setTo(3,3);
		game.physics.arcade.enable(player);
		//player.animations.add("left", [0, 1, 2], 10, true);
		//player.animations.add("right", [4, 5, 6], 10, true);

		keyMove = game.input.keyboard.createCursorKeys();

	}
	function update(){
		player.body.velocity.setTo(0, 0);

		if(keyMove.left.isDown){
			player.body.velocity.x = -150;
			//player.animations.play("left");
		}else if(keyMove.right.isDown){
			player.body.velocity.x = + 150;
			//player.animations.play("right");	
		}else if(keyMove.up.isDown){
			player.body.velocity.y = -150;
			//player.animations.play("left");
		}else if(keyMove.down.isDown){
			player.body.velocity.y = +150;
			//player.animations.play("right");
		}else {
			//player.animations.stop();
			//player.frame = 3;
		}

	}



</script>
